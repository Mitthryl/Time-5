(function(a){function C(){var b=l.scrollLeft(),c=l.width();a([d,p]).css("left",b+c/2);D&&a(m).css({left:b,top:l.scrollTop(),width:c,height:l.height()})}function E(b){b?a("object").add(F?"select":"embed").each(function(a,b){x[a]=[b,b.style.visibility];b.style.visibility="hidden"}):(a.each(x,function(a,b){b[0].style.visibility=b[1]}),x=[]);b=b?"bind":"unbind";l[b]("scroll resize",C);a(document)[b]("keydown",N)}function N(b){b=b.which;var d=a.inArray;return 0<=d(b,c.closeKeys)?y():0<=d(b,c.nextKeys)?G():0<=d(b,c.previousKeys)?H():null}function H(){return z(q)}function G(){return z(r)}function z(a){0<=a&&(g=a,t=h[g][0],q=(g||(c.loop?h.length:0))-1,r=(g+1)%h.length||(c.loop?0:-1),I(),d.className="lbLoading",k=new Image,k.onload=O,k.src=t);return!1}function O(){d.className="";a(n).css({backgroundImage:"url("+t+")",visibility:"hidden",display:""});a(A).width(k.width);a([A,u,v]).height(k.height);a(J).html(h[g][1]||"");a(K).html((1<h.length&&c.counterText||"").replace(/{x}/,g+1).replace(/{y}/,h.length));0<=q&&(L.src=h[q][0]);0<=r&&(M.src=h[r][0]);e=n.offsetWidth;f=n.offsetHeight;var b=Math.max(0,B-f/2);d.offsetHeight!=f&&a(d).animate({height:f,top:b},c.resizeDuration,c.resizeEasing);d.offsetWidth!=e&&a(d).animate({width:e,marginLeft:-e/2},c.resizeDuration,c.resizeEasing);a(d).queue(function(){a(p).css({width:e,top:b+f,marginLeft:-e/2,visibility:"hidden",display:""});a(n).css({display:"none",visibility:"",opacity:""}).fadeIn(c.imageFadeDuration,P)})}function P(){0<=q&&a(u).show();0<=r&&a(v).show();a(w).css("marginTop",-w.offsetHeight).animate({marginTop:0},c.captionAnimationDuration);p.style.visibility=""}function I(){k.onload=null;k.src=L.src=M.src=t;a([d,n,w]).stop(!0);a([u,v,n,p]).hide()}function y(){0<=g&&(I(),g=q=r=-1,a(d).hide(),a(m).stop().fadeOut(c.overlayFadeDuration,E));return!1}var l=a(window),c,h,g=-1,t,q,r,D,B,e,f,F=!window.XMLHttpRequest,x=[],k={},L=new Image,M=new Image,m,d,n,A,u,v,p,w,J,K;a(function(){a("body").append(a([m=a('<div id="lbOverlay" />').click(y)[0],d=a('<div id="lbCenter" />')[0],p=a('<div id="lbBottomContainer" />')[0]]).css("display","none"));n=a('<div id="lbImage" />').appendTo(d).append(A=a('<div style="position: relative;" />').append([u=a('<a id="lbPrevLink" href="#" />').click(H)[0],v=a('<a id="lbNextLink" href="#" />').click(G)[0]])[0])[0];w=a('<div id="lbBottom" />').appendTo(p).append([a('<a id="lbCloseLink" href="#" />').click(y)[0],J=a('<div id="lbCaption" />')[0],K=a('<div id="lbNumber" />')[0],a('<div style="clear: both;" />')[0]])[0]});a.slimbox=function(b,g,k){c=a.extend({loop:!1,overlayOpacity:.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},k);"string"==typeof b&&(b=[[b,g]],g=0);B=l.scrollTop()+l.height()/2;e=c.initialWidth;f=c.initialHeight;a(d).css({top:Math.max(0,B-f/2),width:e,height:f,marginLeft:-e/2}).show();if(D=F||m.currentStyle&&"fixed"!=m.currentStyle.position)m.style.position="absolute";a(m).css("opacity",c.overlayOpacity).fadeIn(c.overlayFadeDuration);C();E(1);h=b;c.loop=c.loop&&1<h.length;return z(g)};a.fn.slimbox=function(b,c,d){c=c||function(a){return[a.href,a.title]};d=d||function(){return!0};var g=this;return g.unbind("click").click(function(){var h=this,k=0,e,f=0,l;e=a.grep(g,function(a,b){return d.call(h,a,b)});for(l=e.length;f<l;++f)e[f]==h&&(k=f),e[f]=c(e[f],f);return a.slimbox(e,k,b)})}})(jQuery);jQuery(function($){$("a[rel^='lightbox']").slimbox({},null,function(el){return(this==el)||((this.rel.length>8)&&(this.rel==el.rel));});});